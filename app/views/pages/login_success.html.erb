<% provide(:title, 'ダッシュボード') %>
<main>
  <div id="flash_messages">
    <%= render 'layouts/flash' %>
  </div>
  <h1>ようこそ！
    <% if @role == 'teacher' %>
      <%= @name %>せんせい
    <% else %>
      <%= @grade %>ねん<%= @class_num %>くみの<%= @student_num %>ばんさん
    <% end %>
  </h1>

  <div id="calendar">
    <%= month_calendar(events: @diaries) do |date, diaries_for_date| %>
      <div class="day">
        <div class="date-number"><%= date.day %></div>
        <% diaries_for_date.each do |diary| %>
          <% diary.stamps.each do |stamp| %>
            <%= link_to image_tag(stamp.stamp_image, class: 'diary-stamp'), diary_path(diary) %>
          <% end %>
        <% end %>
      </div>
    <% end %>
  </div>

  <ul>
    <li class="write_diary_button"><%= link_to 'にっきをかく', new_diary_path %></li>
    <% if @role == 'teacher' %>
      <li class="show_diary_button"><%= link_to 'にっきをみる' %></li>
    <% end %>
  </ul>
</main>
